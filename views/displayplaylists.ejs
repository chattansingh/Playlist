<script type = "text/javascript">
    //check if the google authorized variable is set.
    var tubeauth = <%if(locals.authorized){%>true;<%} else {%>false;<%}%>
    var ids; 
    var spotauth = <%if(locals.spotauth){%>true;<%} else {%>false;<%}%>
    //get the spotify playlists if spotify has been authorized by the user.
    if(spotauth){

    }
    //get the youtube playlists if youtube has been authorized by the user.
    if(tubeauth){
        $.get({
            url: './home/playlistinfo',
            dataType: 'json',
            success: function(data, stat){
                ids = data['plids'];
                for(var i = 0; i < ids.length; i++){
                    var id = '' + ids[i].id;
                    var title = '' + ids[i].title;
                    //create the title display for each item. Might find a cleaner solution down the line...
                    $("#youtube-playlists.panel-group ").append('\
                        <div class="panel panel-default">\
                            <div class="panel-heading">\
                                <h4 class="panel-title">\
                                    <a data-toggle="collapse" href="#collapse' + id + '">' + title + '</a>\
                                </h4>\
                            </div>\
                            <div id="collapse' + id + '" class="collapse">\
                                <ul id = ' + id + ' class="list-group">\
                                </ul>\
                            </div>\
                        </div>\
                        \
                    ');

                    (function(id){
                    $.get({
                        url: './home/playlists',
                        data: { id: id},
                        dataType:'json',
                        success: function(data, stat){
                            for(var j = 0; j < data.items.length; j++){

                                $("ul#" + id).prepend('<li class = "list-group-item">' + data.items[j].snippet.title+'</li>');
                            }
                        },
                        error: function(err){
                            console.log("error grabbing playlist items: ", err);
                        }
                    });
                    })(id);
                }
            },
            error: function(err){
                console.log("error grabbing playlist meta-data: ", err);
            }                
        });
    }
</script>